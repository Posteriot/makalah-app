/* ==========================================================================
 * Chat Token System (Staging)
 * Scoped to [data-chat-scope] — will be promoted to globals.css when stable
 * Palette: Tailwind CSS v4 Slate OKLCH (per-step hue)
 *   - Light mode: native Tailwind chroma per step
 *   - Dark mode: native hue per step, chroma halved (~0.020) to reduce blue tint
 * Rules: No transparency (except shadow/backdrop), min 4-step contrast gap
 * ========================================================================== */

@theme inline {
  --color-chat-background: var(--chat-background);
  --color-chat-foreground: var(--chat-foreground);
  --color-chat-card: var(--chat-card);
  --color-chat-card-foreground: var(--chat-card-foreground);
  --color-chat-popover: var(--chat-popover);
  --color-chat-popover-foreground: var(--chat-popover-foreground);
  --color-chat-primary: var(--chat-primary);
  --color-chat-primary-foreground: var(--chat-primary-foreground);
  --color-chat-secondary: var(--chat-secondary);
  --color-chat-secondary-foreground: var(--chat-secondary-foreground);
  --color-chat-muted: var(--chat-muted);
  --color-chat-muted-foreground: var(--chat-muted-foreground);
  --color-chat-accent: var(--chat-accent);
  --color-chat-accent-foreground: var(--chat-accent-foreground);
  --color-chat-destructive: var(--chat-destructive);
  --color-chat-destructive-foreground: var(--chat-destructive-foreground);
  --color-chat-success: var(--chat-success);
  --color-chat-success-foreground: var(--chat-success-foreground);
  --color-chat-warning: var(--chat-warning);
  --color-chat-warning-foreground: var(--chat-warning-foreground);
  --color-chat-info: var(--chat-info);
  --color-chat-info-foreground: var(--chat-info-foreground);
  --color-chat-border: var(--chat-border);
  --color-chat-input: var(--chat-input);
  --color-chat-ring: var(--chat-ring);
  --color-chat-sidebar: var(--chat-sidebar);
  --color-chat-sidebar-foreground: var(--chat-sidebar-foreground);
  --color-chat-sidebar-primary: var(--chat-sidebar-primary);
  --color-chat-sidebar-primary-foreground: var(--chat-sidebar-primary-foreground);
  --color-chat-sidebar-accent: var(--chat-sidebar-accent);
  --color-chat-sidebar-accent-foreground: var(--chat-sidebar-accent-foreground);
  --color-chat-sidebar-border: var(--chat-sidebar-border);
  --color-chat-sidebar-ring: var(--chat-sidebar-ring);
}

/* ── Light Mode ── */
[data-chat-scope] {
  /* ── shadcn/ui remap ──
   * Makes shadcn primitives (Button, Dialog, Select, etc.) inside chat scope
   * resolve to --chat-* values instead of globals.css defaults. */
  --background: var(--chat-background);
  --foreground: var(--chat-foreground);
  --card: var(--chat-card);
  --card-foreground: var(--chat-card-foreground);
  --popover: var(--chat-popover);
  --popover-foreground: var(--chat-popover-foreground);
  --primary: var(--chat-primary);
  --primary-foreground: var(--chat-primary-foreground);
  --secondary: var(--chat-secondary);
  --secondary-foreground: var(--chat-secondary-foreground);
  --muted: var(--chat-muted);
  --muted-foreground: var(--chat-muted-foreground);
  --accent: var(--chat-accent);
  --accent-foreground: var(--chat-accent-foreground);
  --destructive: var(--chat-destructive);
  --destructive-foreground: var(--chat-destructive-foreground);
  --border: var(--chat-border);
  --input: var(--chat-input);
  --ring: var(--chat-ring);
  --sidebar: var(--chat-sidebar);
  --sidebar-foreground: var(--chat-sidebar-foreground);
  --sidebar-primary: var(--chat-sidebar-primary);
  --sidebar-primary-foreground: var(--chat-sidebar-primary-foreground);
  --sidebar-accent: var(--chat-sidebar-accent);
  --sidebar-accent-foreground: var(--chat-sidebar-accent-foreground);
  --sidebar-border: var(--chat-sidebar-border);
  --sidebar-ring: var(--chat-sidebar-ring);

  /* Surface & Text — Tailwind Slate v4 native OKLCH */
  --chat-background: oklch(0.984 0.003 247.858);    /* slate-50 */
  --chat-foreground: oklch(0.129 0.042 264.695);    /* slate-950 */
  --chat-card: oklch(0.984 0.003 247.858);           /* slate-50 */
  --chat-card-foreground: oklch(0.129 0.042 264.695); /* slate-950 */
  --chat-popover: oklch(0.984 0.003 247.858);       /* slate-50 */
  --chat-popover-foreground: oklch(0.129 0.042 264.695); /* slate-950 */
  --chat-muted: oklch(0.929 0.013 255.508);         /* slate-200 */
  --chat-muted-foreground: oklch(0.554 0.046 257.417); /* slate-500 */
  --chat-accent: oklch(0.968 0.007 247.896);        /* slate-100 */
  --chat-accent-foreground: oklch(0.129 0.042 264.695); /* slate-950 */
  --chat-secondary: oklch(0.929 0.013 255.508);     /* slate-200 */
  --chat-secondary-foreground: oklch(0.208 0.042 265.755); /* slate-900 */

  /* Brand & States */
  --chat-primary: oklch(0.279 0.041 260.031);       /* slate-800 */
  --chat-primary-foreground: oklch(1 0 0);           /* white */
  --chat-destructive: oklch(0.586 0.253 17.585);    /* rose-600 */
  --chat-destructive-foreground: oklch(1 0 0);       /* white */
  --chat-success: oklch(0.6 0.118 184.704);          /* teal-600 */
  --chat-success-foreground: oklch(1 0 0);           /* white */
  --chat-warning: oklch(0.666 0.179 58.318);         /* amber-600 */
  --chat-warning-foreground: oklch(1 0 0);           /* white */
  --chat-info: oklch(0.588 0.158 241.966);           /* sky-600 */
  --chat-info-foreground: oklch(1 0 0);              /* white */

  /* Border & Focus */
  --chat-border: oklch(0.869 0.022 252.894);         /* slate-300 — visible against light surfaces */
  --chat-input: oklch(0.869 0.022 252.894);          /* slate-300 */
  --chat-ring: oklch(0.588 0.158 241.966);           /* sky-600 (focus ring) */

  /* Sidebar — activity bar slightly darker than slate-100 */
  --chat-sidebar: oklch(0.950 0.010 251.0);          /* between slate-100 and slate-200 */
  --chat-sidebar-foreground: oklch(0.129 0.042 264.695); /* slate-950 */
  --chat-sidebar-primary: oklch(0.446 0.043 257.281); /* slate-600 */
  --chat-sidebar-primary-foreground: oklch(1 0 0);   /* white */
  --chat-sidebar-accent: oklch(0.929 0.013 255.508); /* slate-200 */
  --chat-sidebar-accent-foreground: oklch(0.129 0.042 264.695); /* slate-950 */
  --chat-sidebar-border: oklch(0.869 0.022 252.894); /* slate-300 — visible against sidebar bg */
  --chat-sidebar-ring: oklch(0.588 0.158 241.966);  /* sky-600 (focus ring) */
}

/* ── Dark Mode ── */
.dark [data-chat-scope] {
  /* ── shadcn/ui remap (dark) ── */
  --background: var(--chat-background);
  --foreground: var(--chat-foreground);
  --card: var(--chat-card);
  --card-foreground: var(--chat-card-foreground);
  --popover: var(--chat-popover);
  --popover-foreground: var(--chat-popover-foreground);
  --primary: var(--chat-primary);
  --primary-foreground: var(--chat-primary-foreground);
  --secondary: var(--chat-secondary);
  --secondary-foreground: var(--chat-secondary-foreground);
  --muted: var(--chat-muted);
  --muted-foreground: var(--chat-muted-foreground);
  --accent: var(--chat-accent);
  --accent-foreground: var(--chat-accent-foreground);
  --destructive: var(--chat-destructive);
  --destructive-foreground: var(--chat-destructive-foreground);
  --border: var(--chat-border);
  --input: var(--chat-input);
  --ring: var(--chat-ring);
  --sidebar: var(--chat-sidebar);
  --sidebar-foreground: var(--chat-sidebar-foreground);
  --sidebar-primary: var(--chat-sidebar-primary);
  --sidebar-primary-foreground: var(--chat-sidebar-primary-foreground);
  --sidebar-accent: var(--chat-sidebar-accent);
  --sidebar-accent-foreground: var(--chat-sidebar-accent-foreground);
  --sidebar-border: var(--chat-sidebar-border);
  --sidebar-ring: var(--chat-sidebar-ring);

  /* Surface & Text — true neutral (chroma=0), matching globals.css convention */
  --chat-background: oklch(0.208 0 0);              /* neutral-900 */
  --chat-foreground: oklch(0.968 0 0);              /* neutral-100 */
  --chat-card: oklch(0.208 0 0);                     /* neutral-900 */
  --chat-card-foreground: oklch(0.968 0 0);          /* neutral-100 */
  --chat-popover: oklch(0.279 0 0);                 /* neutral-800 */
  --chat-popover-foreground: oklch(0.968 0 0);      /* neutral-100 */
  --chat-muted: oklch(0.279 0 0);                   /* neutral-800 */
  --chat-muted-foreground: oklch(0.704 0 0);        /* neutral-400 */
  --chat-accent: oklch(0.240 0 0);                   /* between neutral-900 and neutral-800 */
  --chat-accent-foreground: oklch(0.984 0 0);       /* neutral-50 */
  --chat-secondary: oklch(0.279 0 0);               /* neutral-800 */
  --chat-secondary-foreground: oklch(0.968 0 0);    /* neutral-100 */

  /* Brand & States */
  --chat-primary: oklch(0.968 0 0);                  /* neutral-100 */
  --chat-primary-foreground: oklch(0.129 0 0);       /* neutral-950 */
  --chat-destructive: oklch(0.586 0.253 17.585);    /* rose-600 */
  --chat-destructive-foreground: oklch(1 0 0);       /* white — same bg color both modes */
  --chat-success: oklch(0.6 0.118 184.704);          /* teal-600 */
  --chat-success-foreground: oklch(1 0 0);           /* white */
  --chat-warning: oklch(0.666 0.179 58.318);         /* amber-600 */
  --chat-warning-foreground: oklch(1 0 0);           /* white */
  --chat-info: oklch(0.588 0.158 241.966);           /* sky-600 */
  --chat-info-foreground: oklch(1 0 0);              /* white */

  /* Border & Focus */
  --chat-border: oklch(0.372 0 0);                   /* neutral-700 */
  --chat-input: oklch(0.372 0 0);                    /* neutral-700 */
  --chat-ring: oklch(0.588 0.158 241.966);           /* sky-600 (focus ring) */

  /* Sidebar */
  --chat-sidebar: oklch(0.129 0 0);                  /* neutral-950 — activity bar */
  --chat-sidebar-foreground: oklch(0.968 0 0);       /* neutral-100 */
  --chat-sidebar-primary: oklch(0.968 0 0);          /* neutral-100 */
  --chat-sidebar-primary-foreground: oklch(0.279 0 0); /* neutral-800 */
  --chat-sidebar-accent: oklch(0.279 0 0);           /* neutral-800 */
  --chat-sidebar-accent-foreground: oklch(0.984 0 0); /* neutral-50 */
  --chat-sidebar-border: oklch(0.372 0 0);           /* neutral-700 */
  --chat-sidebar-ring: oklch(0.588 0.158 241.966);  /* sky-600 (focus ring) */
}

/* ── Mobile Overrides ── */
@media (max-width: 767px) {
  [data-chat-scope] {
    --activity-bar-width: 0px;
    --chat-input-pad-x: 1rem;
  }
}
